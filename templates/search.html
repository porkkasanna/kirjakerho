{% extends "layout.html" %}

{% block title %}Hae kirjakerhoista{% endblock %}

{% block content %}

<h1>Hae kirjakerhoista</h1>

<form action="/search" method="get">
    <p>
        {% if query %}
        <input id="text_search" type="text" name="query" value="{{ query }}" />
        {% else %}
        <input id="text_search" type="text" name="query" />
        {% endif %}
        <select name="query_from" id="query_from">
            {% if q_from == "title" %}
            <option value="title" selected>kirjan nimi</option>
            {% else %}
            <option value="title">kirjan nimi</option>
            {% endif %}
            {% if q_from == "author" %}
            <option value="author" selected>kirjailija</option>
            {% else %}
            <option value="author">kirjailija</option>
            {% endif %}
            {% if q_from == "user" %}
            <option value="user" selected>käyttäjä</option>
            {% else %}
            <option value="user">käyttäjä</option>
            {% endif %}
            {% if q_from == "genre" %}
            <option value="genre" selected>genre</option>
            {% else %}
            <option value="genre">genre</option>
            {% endif %}
        </select>
        <input id="submit_search" type="submit" value="Hae" />
    </p>
</form>

{% if query %}
<h1>Hakutulokset</h1>

{% if results %}
{% for result in results %}
<p>
    <a href="/bookclub/{{ result.id }}">{{ result.title }}</a>, {{ result.author }}
    <br />
    {{ result.username }}
</p>
{% endfor %}
{% else %}
<p>
    Hakusanalla <i>{{ query }}</i> ei löytynyt kirjakerhoja.
</p>
{% endif %}
{% endif %}
{% endblock %}